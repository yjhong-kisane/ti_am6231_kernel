// SPDX-License-Identifier: GPL-2.0
/*
 * Common dtsi for AM62x SK and derivatives
 *
 * Copyright (C) 2021-2022 Texas Instruments Incorporated - https://www.ti.com/
 */

/ {
	aliases {
		serial2 = &main_uart0;
		mmc0 = &sdhci0;
		mmc1 = &sdhci1;
		mmc2 = &sdhci2;
		spi0 = &ospi0;
		usb0 = &usb0;
		usb1 = &usb1;
		ethernet0 = &cpsw_port1;
		ethernet1 = &cpsw_port2;
		rtc0 = &mcp_rtc;
	};

	chosen {
		stdout-path = "serial2:115200n8";
		bootargs = "console=ttyS2,115200n8 earlycon=ns16550a,mmio32,0x02800000";
	};

	memory@80000000 {
		device_type = "memory";
		/* 2G RAM */
		reg = <0x00000000 0x80000000 0x00000000 0x80000000>;

	};

	reserved-memory {
		#address-cells = <2>;
		#size-cells = <2>;
		ranges;

		rtos_ipc_memory_region: ipc-memories@9c800000 {
			compatible = "shared-dma-pool";
			reg = <0x00 0x9c800000 0x00 0x00300000>;
			no-map;
		};

		mcu_m4fss_dma_memory_region: m4f-dma-memory@9cb00000 {
			compatible = "shared-dma-pool";
			reg = <0x00 0x9cb00000 0x00 0x100000>;
			no-map;
		};

		mcu_m4fss_memory_region: m4f-memory@9cc00000 {
			compatible = "shared-dma-pool";
			reg = <0x00 0x9cc00000 0x00 0xe00000>;
			no-map;
		};

		wkup_r5fss0_core0_dma_memory_region: r5f-dma-memory@9da00000 {
			compatible = "shared-dma-pool";
			reg = <0x00 0x9da00000 0x00 0x00100000>;
			no-map;
		};

		wkup_r5fss0_core0_memory_region: r5f-memory@9db00000 {
			compatible = "shared-dma-pool";
			reg = <0x00 0x9db00000 0x00 0x00c00000>;
			no-map;
		};

		lpm_ctx_ddr: lpm-memory@9e700000 {
			reg = <0x00 0x9e700000 0x00 0x80000>;
			alignment = <0x1000>;
		};

		secure_tfa_ddr: tfa@9e780000 {
			reg = <0x00 0x9e780000 0x00 0x80000>;
			alignment = <0x1000>;
			no-map;
		};

		secure_ddr: optee@9e800000 {
			reg = <0x00 0x9e800000 0x00 0x01800000>; /* for OP-TEE */
			alignment = <0x1000>;
			no-map;
		};
	};

	vmain_pd: regulator-0 {
		/* TPS65988 PD CONTROLLER OUTPUT */
		compatible = "regulator-fixed";
		regulator-name = "vmain_pd";
		regulator-min-microvolt = <5000000>;
		regulator-max-microvolt = <5000000>;
		regulator-always-on;
		regulator-boot-on;
	};

	vcc_5v0: regulator-1 {
		/* Output of TPS630702 */
		compatible = "regulator-fixed";
		regulator-name = "vcc_5v0";
		regulator-min-microvolt = <5000000>;
		regulator-max-microvolt = <5000000>;
		vin-supply = <&vmain_pd>;
		regulator-always-on;
		regulator-boot-on;
	};

	vcc_3v3_sys: regulator-2 {
		/* output of LM61460-Q1 */
		compatible = "regulator-fixed";
		regulator-name = "vcc_3v3_sys";
		regulator-min-microvolt = <3300000>;
		regulator-max-microvolt = <3300000>;
		vin-supply = <&vmain_pd>;
		regulator-always-on;
		regulator-boot-on;
	};

	vdd_mmc1: regulator-3 {
		// AM62SK EVM - SoC eFuse Voltage(VPP=1.8V) Regulator Enable)
		/* TPS22918DBVR */
		compatible = "regulator-fixed";
		regulator-name = "vdd_mmc1";
		pinctrl-names = "default";
		pinctrl-0 = <&vdd_mmc1_pins_default>;
		regulator-min-microvolt = <3300000>;
		regulator-max-microvolt = <3300000>;
		regulator-boot-on;
		enable-active-high;
		vin-supply = <&vcc_3v3_sys>;
		//gpio = <&exp1 3 GPIO_ACTIVE_HIGH>;		// VPP_LDO_EN (TLV75518PDQNR) - AM62SK EVM
		gpio = <&main_gpio0 32 GPIO_ACTIVE_HIGH>;	// VPP_1VP_EN (TLV75518PDBVR) - 입금기
	};

	vdd_sd_dv: regulator-4 {
		// AM62SK EVM - SD Card IO Voltage Select
		/* Output of TLV71033 */
		compatible = "regulator-gpio";
		//regulator-name = "tlv71033";
		regulator-name = "tps65219-LDO1-SEL-SD";
		pinctrl-names = "default";
		pinctrl-0 = <&vdd_sd_dv_pins_default>;
		regulator-min-microvolt = <1800000>;
		regulator-max-microvolt = <3300000>;
		regulator-boot-on;
		vin-supply = <&vcc_5v0>;
		//gpios = <&main_gpio0 31 GPIO_ACTIVE_HIGH>;	// VSEL_SD (TLV7103318QDSERQ1) - AM62SK EVM
		gpios = <&main_gpio0 42 GPIO_ACTIVE_HIGH>;		// VSEL_SD/VSEL_DDR - 입금기
		states = <1800000 0x0>,
			 <3300000 0x1>;
	};

	/*
	vcc_1v8: regulator-7 {
		// output of TPS6282518DMQ
		compatible = "regulator-fixed";
		regulator-name = "vcc_1v8";
		regulator-min-microvolt = <1800000>;
		regulator-max-microvolt = <1800000>;
		vin-supply = <&vcc_3v3_sys>;
		regulator-always-on;
		regulator-boot-on;
	};

	// For TVL320AIC3106 Audio Codec (McASP1)
	tlv320_mclk: clk-0 {
		#clock-cells = <0>;
		compatible = "fixed-clock";
		clock-frequency = <12288000>;
	};
	
	codec_audio: sound {
		compatible = "simple-audio-card";
		simple-audio-card,name = "AM62x-SKEVM";
		simple-audio-card,widgets =
			"Headphone",	"Headphone Jack",
			"Line",	"Line In",
			"Microphone",	"Microphone Jack";
		simple-audio-card,routing =
			"Headphone Jack",	"HPLOUT",
			"Headphone Jack",	"HPROUT",
			"LINE1L",		"Line In",
			"LINE1R",		"Line In",
			"MIC3R",		"Microphone Jack",
			"Microphone Jack",	"Mic Bias";
		simple-audio-card,format = "dsp_b";
		simple-audio-card,bitclock-master = <&sound_master>;
		simple-audio-card,frame-master = <&sound_master>;
		simple-audio-card,bitclock-inversion;

		simple-audio-card,cpu {
			sound-dai = <&mcasp1>;
		};

		sound_master: simple-audio-card,codec {
			sound-dai = <&tlv320aic3106>;
			clocks = <&tlv320_mclk>;
		};
	};

	leds {
		compatible = "pwm-leds";

		led-0 {
			label = "am62-sk:green:heartbeat";
			pwms = <&main_pwm7 0 7812500 0>;
			max-brightness = <255>;
			linux,default-trigger = "heartbeat";
			function = LED_FUNCTION_HEARTBEAT;
			default-state = "off";
		};
	};

	main_pwm7: dmtimer-main-pwm-7 {
		pinctrl-0 = <&usr_led_pins_default>;
		pinctrl-names = "default";
		compatible = "ti,omap-dmtimer-pwm";
		#pwm-cells = <3>;
		ti,timers = <&main_timer7>;
	};

	hdmi_mstrclk: hdmi-mstrclk {
		compatible = "fixed-clock";
		#clock-cells = <0>;
		clock-frequency = <12288000>;
	};

	hdmi: connector {
		compatible = "hdmi-connector";
		label = "hdmi";
		type = "a";
		port {
			hdmi_connector_in: endpoint {
				remote-endpoint = <&sii9022_out>;
			};
		};
	};
	*/


	display {
		compatible = "panel-dpi";
		label = "lcd";
		
		pinctrl-names = "default";
		pinctrl-0 = <&lcd_pins_default>;
		enable-gpios = <&main_gpio1 7 GPIO_ACTIVE_HIGH>;		// (B19) AM6232_LCD_DISP

		panel-timing {
            // 20211227 클리어 디스플레이 LCD 조치 이후
            clock-frequency = <9000000>;   // 9 Mhz (Min. 4 Mhz) for N3/NTMini/NTA
			hactive = <480>;
			vactive = <272>;
			hfront-porch = <8>;
			hback-porch = <43>;
			vfront-porch = <8>;
			vback-porch = <12>;
			hsync-len = <4>;
			vsync-len = <4>;
			hsync-active = <0>;
			vsync-active = <0>;
            bpp = <16>;
            de-active = <1>;
            pixelclk-active = <1>;
        };

		port {
			lcd_in: endpoint {
				// NOTE::2023-04-21
				//https://lore.kernel.org/lkml/20220628181838.2031-1-max.oss.09@gmail.com/T/
				remote-endpoint = <&dpi1_out>;
				data-lines = <16>;	// RGB565
			};
		};
	};

	kisan_common {
		compatible = "kisan_common";
		status = "okay";
		
		UDP_PORT = <7890>;
		SIG_NUM  = <44>;
	};

	kisan_gpio_intr {
		compatible = "kisan_gpio_intr";
		status = "okay";

		pinctrl-names = "default";
		pinctrl-0 = <&kisan_gpio_intr_pins_default>;

		mode = <0>;
		gpio-key-fpga = <0>;	// 2023-05-17 현재 미사용
		//gpio-key-fpga = <399>;	// H24 CPU_BOARD_VER0 (GPIO0_0) 임시 테스트
	};

	kisan_gpio_handler {
		compatible = "kisan_gpio_handler";
		status = "okay";

		pinctrl-names = "default";
		pinctrl-0 = <&kisan_gpio_handler_pins_default>;
	};
};

&main_pmx0 {
	main_uart0_pins_default: main-uart0-pins-default {
		pinctrl-single,pins = <
			AM62X_IOPAD(0x1c8, PIN_INPUT, 0) /* (D14) UART0_RXD */
			AM62X_IOPAD(0x1cc, PIN_OUTPUT, 0) /* (E14) UART0_TXD */
		>;
	};

	main_i2c0_pins_default: main-i2c0-pins-default {
		pinctrl-single,pins = <
			AM62X_IOPAD(0x1e0, PIN_INPUT_PULLUP, 0) /* (B16) I2C0_SCL */
			AM62X_IOPAD(0x1e4, PIN_INPUT_PULLUP, 0) /* (A16) I2C0_SDA */
		>;
	};

	/*
	main_i2c1_pins_default: main-i2c1-pins-default {
		pinctrl-single,pins = <
			AM62X_IOPAD(0x1e8, PIN_INPUT_PULLUP, 0) // (B17) I2C1_SCL
			AM62X_IOPAD(0x1ec, PIN_INPUT_PULLUP, 0) // (A17) I2C1_SDA
		>;
	};
	*/

	main_i2c2_pins_default: main-i2c2-pins-default {
		pinctrl-single,pins = <
			AM62X_IOPAD(0x0b0, PIN_INPUT_PULLUP, 1) /* (K22) GPMC0_CSn2.I2C2_SCL */
			AM62X_IOPAD(0x0b4, PIN_INPUT_PULLUP, 1) /* (K24) GPMC0_CSn3.I2C2_SDA */
		>;
	};

	// iNAND eMMC
	main_mmc0_pins_default: main-mmc0-pins-default {
		pinctrl-single,pins = <
			AM62X_IOPAD(0x220, PIN_INPUT, 0) // (Y3) MMC0_CMD
			AM62X_IOPAD(0x218, PIN_INPUT, 0) // (AB1) MMC0_CLK
			AM62X_IOPAD(0x214, PIN_INPUT, 0) // (AA2) MMC0_DAT0
			AM62X_IOPAD(0x210, PIN_INPUT, 0) // (AA1) MMC0_DAT1
			AM62X_IOPAD(0x20c, PIN_INPUT, 0) // (AA3) MMC0_DAT2
			AM62X_IOPAD(0x208, PIN_INPUT, 0) // (Y4) MMC0_DAT3
			AM62X_IOPAD(0x204, PIN_INPUT, 0) // (AB2) MMC0_DAT4
			AM62X_IOPAD(0x200, PIN_INPUT, 0) // (AC1) MMC0_DAT5
			AM62X_IOPAD(0x1fc, PIN_INPUT, 0) // (AD2) MMC0_DAT6
			AM62X_IOPAD(0x1f8, PIN_INPUT, 0) // (AC2) MMC0_DAT7
		>;
	};
	
	// Micro SD
	main_mmc1_pins_default: main-mmc1-pins-default {
		pinctrl-single,pins = <
			AM62X_IOPAD(0x23c, PIN_INPUT, 0) /* (A21) MMC1_CMD */
			AM62X_IOPAD(0x234, PIN_INPUT, 0) /* (B22) MMC1_CLK */
			AM62X_IOPAD(0x230, PIN_INPUT, 0) /* (A22) MMC1_DAT0 */
			AM62X_IOPAD(0x22c, PIN_INPUT, 0) /* (B21) MMC1_DAT1 */
			AM62X_IOPAD(0x228, PIN_INPUT, 0) /* (C21) MMC1_DAT2 */
			AM62X_IOPAD(0x224, PIN_INPUT, 0) /* (D22) MMC1_DAT3 */
			AM62X_IOPAD(0x240, PIN_INPUT, 0) /* (D17) MMC1_SDCD */
		>;
	};

	/*
	main_mmc2_pins_default: main-mmc2-pins-default {
		pinctrl-single,pins = <
			AM62X_IOPAD(0x120, PIN_INPUT, 0) // (C24) MMC2_CMD
			AM62X_IOPAD(0x118, PIN_INPUT, 0) // (D25) MMC2_CLK
			AM62X_IOPAD(0x114, PIN_INPUT, 0) // (B24) MMC2_DAT0
			AM62X_IOPAD(0x110, PIN_INPUT, 0) // (C25) MMC2_DAT1
			AM62X_IOPAD(0x10c, PIN_INPUT, 0) // (E23) MMC2_DAT2
			AM62X_IOPAD(0x108, PIN_INPUT, 0) // (D24) MMC2_DAT3
			AM62X_IOPAD(0x11c, PIN_INPUT, 0) // (#N/A) MMC2_CLKB
		>;
	};
	
	main_wlirq_pins_default: main-wlirq-pins-default {
		pinctrl-single,pins = <
			AM62X_IOPAD(0x128, PIN_INPUT, 7) // (B23) MMC2_SDWP.GPIO0_72
		>;
	};

	usr_led_pins_default: usr-led-pins-default {
		pinctrl-single,pins = <
			AM62X_IOPAD(0x244, PIN_OUTPUT, 2) // (C17) MMC1_SDWP.TIMER_IO7
		>;
	};
	*/

	main_mdio1_pins_default: main-mdio1-pins-default {
		pinctrl-single,pins = <
			AM62X_IOPAD(0x160, PIN_OUTPUT, 0) // (AD24) MDIO0_MDC
			AM62X_IOPAD(0x15c, PIN_INPUT, 0) // (AB22) MDIO0_MDIO
		>;
	};

	main_rgmii1_pins_default: main-rgmii1-pins-default {
		pinctrl-single,pins = <
			AM62X_IOPAD(0x14c, PIN_INPUT, 1) // (AB17) RGMII1_RD0.RMII1_RXD0		// AM3356_RMII1_RXD0
			AM62X_IOPAD(0x150, PIN_INPUT, 1) // (AC17) RGMII1_RD1.RMII1_RXD1		// AM3356_RMII1_RXD1
			AM62X_IOPAD(0x148, PIN_INPUT, 1) // (AD17) RGMII1_RXC.RMII1_REF_CLK		// AM3356_RMII1_REF_CLK
			AM62X_IOPAD(0x144, PIN_INPUT, 1) // (AE17) RGMII1_RX_CTL.RMII1_RX_ER	// AM3356_RMII1_RXER

			AM62X_IOPAD(0x134, PIN_OUTPUT, 1) // (AE20) RGMII1_TD0.RMII1_TXD0		// AM3356_RMII1_TXD0
			AM62X_IOPAD(0x138, PIN_OUTPUT, 1) // (AD20) RGMII1_TD1.RMII1_TXD1		// AM3356_RMII1_TXD1
			AM62X_IOPAD(0x130, PIN_INPUT, 1) // (AE19) RGMII1_TXC.RMII1_CRS_DV		// AM3356_RMII1_CRS_DV
			AM62X_IOPAD(0x12c, PIN_OUTPUT, 1) // (AD19) RGMII1_TX_CTL.RMII1_TX_EN	// AM3356_RMII1_TXEN
			
			AM62X_IOPAD(0x174, PIN_OUTPUT, 7) // (AD21) RGMII2_TD2.GPIO0_91 		// LAN8710_RESET *****

			/*
			AM62X_IOPAD(0x154, PIN_INPUT, 0) // (AB16) RGMII1_RD2
			AM62X_IOPAD(0x158, PIN_INPUT, 0) // (AA15) RGMII1_RD3
			AM62X_IOPAD(0x13c, PIN_OUTPUT, 0) // (AE18) RGMII1_TD2
			AM62X_IOPAD(0x140, PIN_OUTPUT, 0) // (AD18) RGMII1_TD3
			*/
		>;
	};

	/*
	main_rgmii2_pins_default: main-rgmii2-pins-default {
		pinctrl-single,pins = <
			AM62X_IOPAD(0x184, PIN_INPUT, 0) // (AE23) RGMII2_RD0
			AM62X_IOPAD(0x188, PIN_INPUT, 0) // (AB20) RGMII2_RD1
			//AM62X_IOPAD(0x18c, PIN_INPUT, 0) // (AC21) RGMII2_RD2
			//AM62X_IOPAD(0x190, PIN_INPUT, 0) // (AE22) RGMII2_RD3
			AM62X_IOPAD(0x180, PIN_INPUT, 0) // (AD23) RGMII2_RXC
			AM62X_IOPAD(0x17c, PIN_INPUT, 0) // (AD22) RGMII2_RX_CTL
			AM62X_IOPAD(0x16c, PIN_OUTPUT, 0) // (Y18) RGMII2_TD0
			AM62X_IOPAD(0x170, PIN_OUTPUT, 0) // (AA18) RGMII2_TD1
			//AM62X_IOPAD(0x174, PIN_OUTPUT, 0) // (AD21) RGMII2_TD2 // LAN8710_RESET *****
			//AM62X_IOPAD(0x178, PIN_OUTPUT, 0) // (AC20) RGMII2_TD3
			AM62X_IOPAD(0x168, PIN_OUTPUT, 0) // (AE21) RGMII2_TXC
			AM62X_IOPAD(0x164, PIN_OUTPUT, 0) // (AA19) RGMII2_TX_CTL
		>;
	};
	*/

	/*
	ospi0_pins_default: ospi0-pins-default {
		pinctrl-single,pins = <
			AM62X_IOPAD(0x000, PIN_OUTPUT, 0) // (H24) OSPI0_CLK
			AM62X_IOPAD(0x02c, PIN_OUTPUT, 0) // (F23) OSPI0_CSn0
			AM62X_IOPAD(0x00c, PIN_INPUT, 0) // (E25) OSPI0_D0
			AM62X_IOPAD(0x010, PIN_INPUT, 0) // (G24) OSPI0_D1
			AM62X_IOPAD(0x014, PIN_INPUT, 0) // (F25) OSPI0_D2
			AM62X_IOPAD(0x018, PIN_INPUT, 0) // (F24) OSPI0_D3
			AM62X_IOPAD(0x01c, PIN_INPUT, 0) // (J23) OSPI0_D4
			AM62X_IOPAD(0x020, PIN_INPUT, 0) // (J25) OSPI0_D5
			AM62X_IOPAD(0x024, PIN_INPUT, 0) // (H25) OSPI0_D6
			AM62X_IOPAD(0x028, PIN_INPUT, 0) // (J22) OSPI0_D7
			AM62X_IOPAD(0x008, PIN_INPUT, 0) // (J24) OSPI0_DQS
		>;
	};
	*/

	main_dss0_pins_default: main-dss0-pins-default {
		pinctrl-single,pins = <
			AM62X_IOPAD(0x0100, PIN_OUTPUT, 0) /* (AC25) VOUT0_VSYNC */
			AM62X_IOPAD(0x00f8, PIN_OUTPUT, 0) /* (AB24) VOUT0_HSYNC */
			AM62X_IOPAD(0x0104, PIN_OUTPUT, 0) /* (AC24) VOUT0_PCLK */
			AM62X_IOPAD(0x00fc, PIN_OUTPUT, 0) /* (Y20) VOUT0_DE */
			AM62X_IOPAD(0x00b8, PIN_OUTPUT, 0) /* (U22) VOUT0_DATA0 */
			AM62X_IOPAD(0x00bc, PIN_OUTPUT, 0) /* (V24) VOUT0_DATA1 */
			AM62X_IOPAD(0x00c0, PIN_OUTPUT, 0) /* (W25) VOUT0_DATA2 */
			AM62X_IOPAD(0x00c4, PIN_OUTPUT, 0) /* (W24) VOUT0_DATA3 */
			AM62X_IOPAD(0x00c8, PIN_OUTPUT, 0) /* (Y25) VOUT0_DATA4 */
			AM62X_IOPAD(0x00cc, PIN_OUTPUT, 0) /* (Y24) VOUT0_DATA5 */
			AM62X_IOPAD(0x00d0, PIN_OUTPUT, 0) /* (Y23) VOUT0_DATA6 */
			AM62X_IOPAD(0x00d4, PIN_OUTPUT, 0) /* (AA25) VOUT0_DATA7 */
			AM62X_IOPAD(0x00d8, PIN_OUTPUT, 0) /* (V21) VOUT0_DATA8 */
			AM62X_IOPAD(0x00dc, PIN_OUTPUT, 0) /* (W21) VOUT0_DATA9 */
			AM62X_IOPAD(0x00e0, PIN_OUTPUT, 0) /* (V20) VOUT0_DATA10 */
			AM62X_IOPAD(0x00e4, PIN_OUTPUT, 0) /* (AA23) VOUT0_DATA11 */
			AM62X_IOPAD(0x00e8, PIN_OUTPUT, 0) /* (AB25) VOUT0_DATA12 */
			AM62X_IOPAD(0x00ec, PIN_OUTPUT, 0) /* (AA24) VOUT0_DATA13 */
			AM62X_IOPAD(0x00f0, PIN_OUTPUT, 0) /* (Y22) VOUT0_DATA14 */
			AM62X_IOPAD(0x00f4, PIN_OUTPUT, 0) /* (AA21) VOUT0_DATA15 */
			/*
			AM62X_IOPAD(0x005c, PIN_OUTPUT, 1) // (R24) GPMC0_AD8.VOUT0_DATA16
			AM62X_IOPAD(0x0060, PIN_OUTPUT, 1) // (R25) GPMC0_AD9.VOUT0_DATA17
			AM62X_IOPAD(0x0064, PIN_OUTPUT, 1) // (T25) GPMC0_AD10.VOUT0_DATA18
			AM62X_IOPAD(0x0068, PIN_OUTPUT, 1) // (R21) GPMC0_AD11.VOUT0_DATA19
			AM62X_IOPAD(0x006c, PIN_OUTPUT, 1) // (T22) GPMC0_AD12.VOUT0_DATA20
			AM62X_IOPAD(0x0070, PIN_OUTPUT, 1) // (T24) GPMC0_AD13.VOUT0_DATA21
			AM62X_IOPAD(0x0074, PIN_OUTPUT, 1) // (U25) GPMC0_AD14.VOUT0_DATA22
			AM62X_IOPAD(0x0078, PIN_OUTPUT, 1) // (U24) GPMC0_AD15.VOUT0_DATA23
			*/
		>;
	};

	vdd_sd_dv_pins_default: vdd-sd-dv-pins-default {
		pinctrl-single,pins = <
			//AM62X_IOPAD(0x07c, PIN_OUTPUT, 7) 	/* (P25) GPMC0_CLK.GPIO0_31 */
			/* L21 0x000f_40ac VSEL_SD/VSEL_DDR */
			AM62X_IOPAD(0x0ac, PIN_OUTPUT, 7)		/* (L21) GPMC0_CSn1.GPIO0_42 */
		>;
	};

	vdd_mmc1_pins_default: vdd-mmc1-pins-default {
		pinctrl-single,pins = <
			/* L23 0x000f_4084 VPP_1VP_EN */
			AM62X_IOPAD(0x084, PIN_OUTPUT, 7)		/* (L23) GPMC0_ADVn_ALE.GPIO0_32 */
		>;
	};

	pmic_irq_pins_default: pmic-irq-pins-default {
		pinctrl-single,pins = <
			/* D16 0x000f_41f4 EXTINTn */
			AM62X_IOPAD(0x01f4, PIN_INPUT, 0) 		/* (D16) EXTINTn.EXTINTn */
		>;
	};

	/*
	main_gpio1_ioexp_intr_pins_default: main-gpio1-ioexp-intr-pins-default {
		pinctrl-single,pins = <
			AM62X_IOPAD(0x01d4, PIN_INPUT, 7) // (B15) UART0_RTSn.GPIO1_23
		>;
	};
	*/

	main_usb1_pins_default: main-usb1-pins-default {
		pinctrl-single,pins = <
			AM62X_IOPAD(0x0258, PIN_OUTPUT, 0) /* (F18) USB1_DRVVBUS */
		>;
	};
	
	/*
	main_mcasp1_pins_default: main-mcasp1-pins-default {
		pinctrl-single,pins = <
			AM62X_IOPAD(0x0090, PIN_INPUT, 2) // (M24) GPMC0_BE0N_CLE.MCASP1_ACLKX
			AM62X_IOPAD(0x0098, PIN_INPUT, 2) // (U23) GPMC0_WAIT0.MCASP1_AFSX
			AM62X_IOPAD(0x008c, PIN_OUTPUT, 2) // (L25) GPMC0_WEN.MCASP1_AXR0
			AM62X_IOPAD(0x0084, PIN_INPUT, 2) // (L23) GPMC0_ADVN_ALE.MCASP1_AXR2
		>;
	};
	*/

	main_epwm1_pins_default: main-epwm1-pins-default {
		pinctrl-single,pins = <
			AM62X_IOPAD(0x19c, PIN_OUTPUT, 6)	// (B18) MCASP0_AXR1.EHRPWM1_A (BEEP)
		>;
	};
	
	main_epwm2_pins_default: main-epwm2-pins-default {
		pinctrl-single,pins = <
			/*
			// NOTE::2023-05-11
			// 부팅 하면서 설정 변경 (GPIO1_28 0x07 -> EHRPWM2_A 0x08)
			// devmem2 0x000f41e8 b 0x08
			*/
			//AM62X_IOPAD(0x1e8, PIN_OUTPUT, 8)	// (B17) I2C1_SCL.EHRPWM2_A (AM6232_LCD_BACKLIGHT_PWM)
			AM62X_IOPAD(0x1e8, PIN_OUTPUT, 7)	// (B17) I2C1_SCL.GPIO1_28 (AM6232_LCD_BACKLIGHT_PWM)
		>;
	};

	lcd_pins_default: lcd-pins-default {
		pinctrl-single,pins = <
			/* B19 0x000f_4194 AM6232_LCD_DISP */
			AM62X_IOPAD(0x194, PIN_OUTPUT, 7)	/* (B19) MCASP0_AXR3.GPIO1_7 */
		>;
	};

	touch_intr_pins_default: touch-intr-pins-default {
		pinctrl-single,pins = <
			// L24 0x000f_4088 TOUCH_INT
			AM62X_IOPAD(0x088, PIN_INPUT, 7)	// (L24) GPMC0_OEn_REn.GPIO0_33
		>;
	};

	kisan_gpio_intr_pins_default: kisan-gpio-intr-pins-default {
		pinctrl-single,pins = <
			// NOTE::2023-05-17
			// GPIO0_0, GPIO0_1 쇼트시켜 임시 테스트
			AM62X_IOPAD(0x000, PIN_INPUT, 7) // (H24) GPIO0_0 (CPU_BOARD_VER0)
			AM62X_IOPAD(0x004, PIN_OUTPUT, 7) // (G25) GPIO0_1 (CPU_BOARD_VER1)
		>;
	};

	kisan_gpio_handler_pins_default: kisan-gpio-handler-pins-default {
		pinctrl-single,pins = <
			//AM62X_IOPAD(0x000, PIN_OUTPUT, 7) // (H24) GPIO0_0 (CPU_BOARD_VER0)
			//AM62X_IOPAD(0x004, PIN_OUTPUT, 7) // (G25) GPIO0_1 (CPU_BOARD_VER1)
			AM62X_IOPAD(0x008, PIN_OUTPUT, 7) // (J24) GPIO0_2 (CPU_BOARD_VER2)

			AM62X_IOPAD(0x00c, PIN_OUTPUT, 7) // (E25) GPIO0_3 (VERSION0)
			AM62X_IOPAD(0x010, PIN_OUTPUT, 7) // (G24) GPIO0_4 (VERSION1)

			AM62X_IOPAD(0x02c, PIN_OUTPUT, 7) // (F23) GPIO0_11 (AM6232_STATUS_LED1)
			AM62X_IOPAD(0x034, PIN_OUTPUT, 7) // (H21) GPIO0_13 (AM6232_STATUS_LED3)
			AM62X_IOPAD(0x038, PIN_OUTPUT, 7) // (E24) GPIO0_14 (AM6232_STATUS_LED2)
			AM62X_IOPAD(0x114, PIN_OUTPUT, 7) // (B24) GPIO0_68 (AM6232_PRU_STATUS)
		>;
	};
};

&wkup_uart0 {
	/* WKUP UART0 is used by DM firmware */
	status = "reserved";
};

&mcu_uart0 {
	status = "disabled";
};

&main_uart0 {
	pinctrl-names = "default";
	pinctrl-0 = <&main_uart0_pins_default>;
};

&main_uart1 {
	/* Main UART1 is used by TIFS firmware */
	status = "reserved";
};

&main_uart2 {
	status = "disabled";
};

&main_uart3 {
	status = "disabled";
};

&main_uart4 {
	status = "disabled";
};

&main_uart5 {
	status = "disabled";
};

&main_uart6 {
	status = "disabled";
};

&mcu_i2c0 {
	status = "disabled";
};

&wkup_i2c0 {
	status = "disabled";
};

&main_i2c0 {
	pinctrl-names = "default";
	pinctrl-0 = <&main_i2c0_pins_default>;
	clock-frequency = <400000>;	// 400 khz

	mcp_rtc: rtc@6f {
		compatible = "microchip,mcp7941x";
		reg = <0x6f>;
	};


// NOTE::2023-04-20
// TPS65219 관련 참고 링크
// https://git.kernel.org/pub/scm/linux/kernel/git/broonie/regulator.git/commit/?id=8622817ccb3f545d9440ee8aae46410be0f2b625
// https://lore.kernel.org/lkml/20220913121419.15420-3-jneanne@baylibre.com/
	tps65219: pmic@30 {
		compatible = "ti,tps65219";
		reg = <0x30>;
		system-power-controller;

		pinctrl-names = "default";
		pinctrl-0 = <&pmic_irq_pins_default>;
		interrupt-parent = <&gic500>;
		interrupts = <GIC_SPI 224 IRQ_TYPE_LEVEL_HIGH>;

#if 0
		// NOTE::2023-04-21
		// buck2-supply 설정 후 부팅 시 하기의 에러로 무한 재부팅 됨...
		// [    0.927499] VCC1V8: Bringing 3300000uV into 1800000-1800000uV

		buck1-supply = <&vcc_3v3_sys>;
		buck2-supply = <&vcc_3v3_sys>;
		buck3-supply = <&vcc_3v3_sys>;
		ldo1-supply = <&vcc_3v3_sys>;
		ldo2-supply = <&buck2_reg>;
		ldo3-supply = <&vcc_3v3_sys>;
		ldo4-supply = <&vcc_3v3_sys>;

		regulators {
			buck1_reg: buck1 {
				regulator-name = "VDD_CORE";
				regulator-min-microvolt = <750000>;
				regulator-max-microvolt = <750000>;
				regulator-boot-on;
				regulator-always-on;
			};

			buck2_reg: buck2 {
				regulator-name = "VCC1V8";
				regulator-min-microvolt = <1800000>;
				regulator-max-microvolt = <1800000>;
				regulator-boot-on;
				regulator-always-on;
			};

			buck3_reg: buck3 {
#if 0
				// LPDDR4 = 1.1V
				regulator-name = "VDD_LPDDR4";
				regulator-min-microvolt = <1100000>;
				regulator-max-microvolt = <1100000>;
#else
				// DDR4 = 1.2V
				regulator-name = "VDD_DDR4";
				regulator-min-microvolt = <1200000>;
				regulator-max-microvolt = <1200000>;
#endif
				regulator-boot-on;
				regulator-always-on;
			};

			ldo1_reg: ldo1 {
				regulator-name = "VDDSHV_SD_IO_PMIC";
				regulator-min-microvolt = <3300000>;
				regulator-max-microvolt = <3300000>;
				regulator-allow-bypass;
			};

			ldo2_reg: ldo2 {
				regulator-name = "VDDAR_CORE";
				regulator-min-microvolt = <850000>;
				regulator-max-microvolt = <850000>;
				regulator-boot-on;
				regulator-always-on;
			};

			ldo3_reg: ldo3 {
				regulator-name = "VDDA_1V8";
				regulator-min-microvolt = <1800000>;
				regulator-max-microvolt = <1800000>;
				regulator-boot-on;
				regulator-always-on;
			};

			ldo4_reg: ldo4 {
				regulator-name = "VDD_PHY_2V5";
				regulator-min-microvolt = <2500000>;
				regulator-max-microvolt = <2500000>;
				regulator-boot-on;
				regulator-always-on;
			};
		};
#endif	// #if 0
	};

	/*
	typec_pd: usb-pd@3f {
		compatible = "ti,tps6598x";
		reg = <0x3f>;

		connector {
			ports {
				#address-cells = <1>;
				#size-cells = <0>;

				port@1 {
					reg = <1>;

					usb_con_hs: endpoint {
						remote-endpoint = <&typec_hs>;
					};
				};
			};
		};
	};
	*/
};


&main_i2c1 {
	status = "disabled";
	
	/*
	pinctrl-names = "default";
	pinctrl-0 = <&main_i2c1_pins_default>;
	clock-frequency = <100000>;	// 100 kHz
	*/

	/*
	exp1: gpio@22 {
		compatible = "ti,tca6424";
		reg = <0x22>;
		gpio-controller;
		#gpio-cells = <2>;
		gpio-line-names = "GPIO_CPSW2_RST", "GPIO_CPSW1_RST",
				   "PRU_DETECT", "MMC1_SD_EN",
				   "VPP_LDO_EN", "EXP_PS_3V3_En",
				   "EXP_PS_5V0_En", "EXP_HAT_DETECT",
				   "GPIO_AUD_RSTn", "GPIO_eMMC_RSTn",
				   "UART1_FET_BUF_EN", "WL_LT_EN",
				   "GPIO_HDMI_RSTn", "CSI_GPIO1",
				   "CSI_GPIO2", "PRU_3V3_EN",
				   "HDMI_INTn", "TEST_GPIO2",
				   "MCASP1_FET_EN", "MCASP1_BUF_BT_EN",
				   "MCASP1_FET_SEL", "UART1_FET_SEL",
				   "TSINT#", "IO_EXP_TEST_LED";

		interrupt-parent = <&main_gpio1>;
		interrupts = <23 IRQ_TYPE_EDGE_FALLING>;
		interrupt-controller;
		#interrupt-cells = <2>;

		pinctrl-names = "default";
		pinctrl-0 = <&main_gpio1_ioexp_intr_pins_default>;
	};

	sii9022: sii9022@3b {
		#sound-dai-cells = <0>;
		compatible = "sil,sii9022";
		reg = <0x3b>;

		clocks = <&hdmi_mstrclk>;
		clock-names = "mclk";

		interrupt-parent = <&exp1>;
		interrupts = <16 IRQ_TYPE_EDGE_FALLING>;

		sil,i2s-data-lanes = < 0 >;

		ports {
			#address-cells = <1>;
			#size-cells = <0>;

			port@0 {
				reg = <0>;

				sii9022_in: endpoint {
					remote-endpoint = <&dpi1_out>;
				};
			};

			port@1 {
				reg = <1>;

				sii9022_out: endpoint {
					remote-endpoint = <&hdmi_connector_in>;
				};
			};
		};
	};

	tlv320aic3106: audio-codec@1b {
		#sound-dai-cells = <0>;
		compatible = "ti,tlv320aic3106";
		reg = <0x1b>;
		ai3x-micbias-vg = <1>;		// 2.0V
		status = "okay";

		// Regulators
		AVDD-supply = <&vcc_3v3_sys>;
		IOVDD-supply = <&vcc_3v3_sys>;
		DRVDD-supply = <&vcc_3v3_sys>;
		DVDD-supply = <&vcc_1v8>;
	};
	*/
};

&main_i2c2 {
    pinctrl-names = "default";
    pinctrl-0 = <&main_i2c2_pins_default>;
    clock-frequency = <1000>;   // 1 kHz        // NT3 *****
	//clock-frequency = <300>;    // 0.3 kHz        // For K2A

    ar1021: ar1021@4d {
		compatible = "microchip,ar1021-i2c";
        reg = <0x4d>;

        // L24 GPMC0_OEn_REn.GPIO0_33 TOUCH_INT
		interrupt-parent = <&main_gpio0>;
        interrupts = <33 IRQ_TYPE_EDGE_RISING>;

		pinctrl-names = "default";
		pinctrl-0 = <&touch_intr_pins_default>;
    };
};

&main_i2c3 {
	status = "disabled";
};

&sdhci0 {
	// iNAND eMMC
	pinctrl-names = "default";
	pinctrl-0 = <&main_mmc0_pins_default>;
	ti,driver-strength-ohm = <50>;
	disable-wp;

	//NOTE::2023-07-21
	// HS 로 속도 제한 걸지 않으면 
	// SK EVM 보드에서 파일 write 시 running CQE recovery 문제 발생함
	no-1-8-v;	//  disable SD card HS modes.
	
	// NOTE::2023-05-09
	// https://software-dl.ti.com/processor-sdk-linux/esd/AM62X/08_06_00_42/exports/docs/linux/Foundational_Components/U-Boot/UG-Memory.html
	// Restricting to a given speed mode
	//sdhci-caps-mask = <0x00000004 0x00000000>;	// Limit to SDR50
	//sdhci-caps-mask = <0x00000006 0x00000000>;	// Limit to DDR50
	sdhci-caps-mask = <0x00000007 0x00000000>;	// Limit to SD HS
	//sdhci-caps-mask = <0x00000007 0x00200000>;	// Limit to SD legacy
};

&sdhci1 {
	/* SD/MMC */
	vmmc-supply = <&vdd_mmc1>;
	vqmmc-supply = <&vdd_sd_dv>;
	pinctrl-names = "default";
	pinctrl-0 = <&main_mmc1_pins_default>;
	ti,driver-strength-ohm = <50>;
	disable-wp;
	no-1-8-v;	//  disable SD card HS modes.
	
	// NOTE::2023-05-09
	// https://software-dl.ti.com/processor-sdk-linux/esd/AM62X/08_06_00_42/exports/docs/linux/Foundational_Components/U-Boot/UG-Memory.html
	// Restricting to a given speed mode
	//sdhci-caps-mask = <0x00000004 0x00000000>;	// Limit to SDR50
	//sdhci-caps-mask = <0x00000006 0x00000000>;	// Limit to DDR50
	sdhci-caps-mask = <0x00000007 0x00000000>;	// Limit to SD HS
	//sdhci-caps-mask = <0x00000007 0x00200000>;	// Limit to SD legacy
};

&usbss0 {
	ti,vbus-divider;
};

&usbss1 {
	ti,vbus-divider;
};

&usb0 {
	// AM6232_HOST_USB0_DP : (AD11) USB0_DP
	// AM6232_HOST_USB0_DM : (AE11) USB0_DM

	dr_mode = "host";
	/*
	#address-cells = <1>;
	#size-cells = <0>;
	usb-role-switch;

	port@1 {
		reg = <1>;

		typec_hs: endpoint {
			remote-endpoint = <&usb_con_hs>;
		};
	};
	*/
};

&usb1 {
	// AM6232_USBtoUART_USB1_DP : (AE9) USB1_DP
	// AM6232_USBtoUART_USB1_DM : (AD10) USB1_DM

	dr_mode = "host";
	/*
	pinctrl-names = "default";
	pinctrl-0 = <&main_usb1_pins_default>;
	*/
};

&cpsw3g {
	//TODO::DP83867 Gigabit PHY (CPSW RGMII) -> LAN8710A-EZK (RMII)
	pinctrl-names = "default";
	pinctrl-0 = <&main_mdio1_pins_default
		     &main_rgmii1_pins_default>;
		     //&main_rgmii2_pins_default>;
};

&cpsw_port1 {
	//TODO::DP83867 Gigabit PHY (CPSW RGMII) -> LAN8710A-EZK (RMII)
	//phy-mode = "rgmii-rxid";
	phy-handle = <&cpsw3g_phy0>;
	phy-mode = "rmii";
};

&cpsw_port2 {
	status = "disabled";
	/*
	//phy-mode = "rgmii-rxid";
	phy-handle = <&cpsw3g_phy1>;
	phy-mode = "rmii";
	*/
};

&cpsw3g_mdio {
	//TODO::DP83867 Gigabit PHY (CPSW RGMII) -> LAN8710A-EZK (RMII)
	cpsw3g_phy0: ethernet-phy@0 {
		reg = <1>;
		/*
		ti,rx-internal-delay = <DP83867_RGMIIDCTL_2_00_NS>;
		ti,fifo-depth = <DP83867_PHYCR_FIFO_DEPTH_4_B_NIB>;
		ti,min-output-impedance;
		*/
	};
	/*
	cpsw3g_phy1: ethernet-phy@1 {
		reg = <2>;
		ti,rx-internal-delay = <DP83867_RGMIIDCTL_2_00_NS>;
		ti,fifo-depth = <DP83867_PHYCR_FIFO_DEPTH_4_B_NIB>;
		ti,min-output-impedance;
	};
	*/
};

&dss {
	pinctrl-names = "default";
	pinctrl-0 = <&main_dss0_pins_default>;
};

&dss_ports {
	#address-cells = <1>;
	#size-cells = <0>;

	// vp1: Used for OLDI
	port@0 {
		reg = <0>;
		status = "disabled";
	};

	// vp2: Used as DPI Out
	port@1 {	
		reg = <1>;
		dpi1_out: endpoint {
			remote-endpoint = <&lcd_in>;
			data-lines = <16>;	// RGB565
		};
		/*
		dpi1_out: endpoint {
			remote-endpoint = <&sii9022_in>;
		};
		*/
	};
};

&mcasp0 {
	status = "disabled";
};

&mcasp1 {
	status = "disabled";
	/*
	status = "okay";
	#sound-dai-cells = <0>;

	pinctrl-names = "default";
	pinctrl-0 = <&main_mcasp1_pins_default>;

	// MCASP_IIS_MODE
	op-mode = <0>;          
	tdm-slots = <2>;

  	// 0: INACTIVE, 1: TX, 2: RX
	serial-dir = <
	       1 0 2 0
	       0 0 0 0
	       0 0 0 0
	       0 0 0 0
	>;
	tx-num-evt = <32>;
	rx-num-evt = <32>;
	*/
};

&mcasp2 {
	status = "disabled";
};

&mailbox0_cluster0 {
	mbox_m4_0: mbox-m4-0 {
		ti,mbox-rx = <0 0 0>;
		ti,mbox-tx = <1 0 0>;
	};

	mbox_r5_0: mbox-r5-0 {
		ti,mbox-rx = <2 0 0>;
		ti,mbox-tx = <3 0 0>;
	};
};

&ospi0 {
	status = "disabled";
	/*
	pinctrl-names = "default";
	pinctrl-0 = <&ospi0_pins_default>;
	*/
};

&mcu_m4fss {
	mboxes = <&mailbox0_cluster0 &mbox_m4_0>;
	memory-region = <&mcu_m4fss_dma_memory_region>,
			<&mcu_m4fss_memory_region>;
};

&wkup_r5fss0_core0 {
	mboxes = <&mailbox0_cluster0 &mbox_r5_0>;
	memory-region = <&wkup_r5fss0_core0_dma_memory_region>,
			<&wkup_r5fss0_core0_memory_region>;
};

&main_mcan0 {
	status = "disabled";
};

&mcu_rti0 {
	/* MCU RTI0 is used by M4F firmware */
	status = "reserved";
};

&wkup_rti0 {
	/* WKUP RTI0 is used by DM firmware */
	status = "reserved";
};


// NOTE::2023-05-11
// https://software-dl.ti.com/processor-sdk-linux/esd/AM62X/08_03_00_19/exports/docs/linux/Foundational_Components/Kernel/Kernel_Drivers/PWM.html
&epwm0 {
	status = "okay";
};

&epwm1 {
	pinctrl-names = "default";
	pinctrl-0 = <&main_epwm1_pins_default>;
	status = "okay";
};

&epwm2 {
	pinctrl-names = "default";
	pinctrl-0 = <&main_epwm2_pins_default>;
	status = "okay";
};

&ecap0_pwm {
	status = "disabled";
};

&ecap1_pwm {
	status = "disabled";
};

&ecap2_pwm {
	status = "disabled";
};


// NOTE::2023-05-09
// https://e2e.ti.com/support/processors-group/processors/f/processors-forum/1218039/am623-stuck-in-sd-card-after-boot-up/4622186#4622186
&main_rti0 {	// watchdog@e000000
	status = "okay";
};

&main_rti1 {	// watchdog@e010000
	status = "okay";
};

&main_rti2 {	// watchdog@e020000
	status = "disabled";
	// Internal error: synchronous external abort: 96000010 [#1] PREEMPT SMP
};

&main_rti3 {	// watchdog@e030000
	status = "disabled";
	// Internal error: synchronous external abort: 96000010 [#1] PREEMPT SMP
};

&main_rti15 {	// watchdog@e0f0000
	status = "disabled";
	// Internal error: synchronous external abort: 96000010 [#1] PREEMPT SMP
};
